# LLNL AMG application job template
# NOTE: bash syntax is used here

# need to make an isolated directory for each QCD run to keep them
# from stepping on each others output files
#TEMPDIR="job$JOBID"
#mkdir -p $PWD/$TEMPDIR
#cd $TEMPDIR
# symlink the input files
#ln -s TESTSET_PATH_HERE//pg.input pg-input-data
#cbench_echo "Cbench job tempdir: $PWD"

PX=PX_HERE
PY=PY_HERE
PZ=PZ_HERE

# Run solver 3 
cbench_echo ""
cbench_echo "=========== solver 3 ============="
cbench_echo ""
CMD="JOBLAUNCH_CMD_HERE CBENCHTEST_BIN_HERE/amg2006 -P $PX $PY $PZ -r 17 17 17 -printstats -solver 3"
cbench_run_cmd $CMD
timestamp=`date --iso-8601=seconds`
cbench_echo "Cbench amg solver3 timestamp: $timestamp"

# Run solver 4
cbench_echo ""
cbench_echo "=========== solver 4 ============="
cbench_echo ""
CMD="JOBLAUNCH_CMD_HERE CBENCHTEST_BIN_HERE/amg2006 -P $PX $PY $PZ -r 17 17 17 -printstats -solver 4"
cbench_run_cmd $CMD
mv psums psums.prep
cbench_echo "Cbench amg solver4 timestamp: $timestamp"
