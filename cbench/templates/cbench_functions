# vim: syntax=sh tabstop=4
#
# This file contains Cbench common support for the bash based
# job scripts used

#
# Some common routines that Cbench job scripts use to help deal
# with where stdout and stderr output is captured
cbench_run_cmd()
{
	local cmd=$@

echo "STDIN_FILE: $STDIN_FILE"

	# FIXME: just a note that the STDIN_FILE stuff and the SCALING_PARAMS stuff need to work for the
	#        interactive case too.... before I forget to note that it does...
    if [ "$CBENCH_RUN_TYPE" == "INTERACTIVE" ]; then
	    $cmd 1>>$STDOUT_FILE 2>>$STDERR_FILE
    #this stuff is used by LAMMPS 
    else
        if [ -n "$STDIN_FILE" ] ; then
	        $cmd < "$STDIN_FILE"
        elif [ -n "$SCALING_PARAMS" ]; then
            $cmd "$SCALING_PARAMS" < "$STDIN_FILE"
        else
	        $cmd
        fi
    fi
}

cbench_echo()
{
	local string=$@
    
    if [ "$CBENCH_RUN_TYPE" == "INTERACTIVE" ]; then
	    echo $string 1>>$STDOUT_FILE
    else
	    echo $string
    fi    
}

